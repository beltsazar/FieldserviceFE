 <h1>Areas</h1>

 <form class="m-b-20">

   <div class="row">
     <div class="col-xs-12 col-sm-6">
       <div class="form-group">
         <label for="type">Type</label>
         <select id="type" name="type" class="form-control" ng-model="ctrl.model.type" ng-options="type as type.name for type in ctrl.types track by type.id"></select>
       </div>
     </div>
   </div>

   <h2>Assignments</h2>

   <div class="row">
     <div class="col-xs-12 col-sm-6">
       <div class="form-group">
         <label for="campaigns">Campaign</label>
         <select id="campaigns" name="campaigns" class="form-control" multiple="multiple" size="5" ng-model="ctrl.model.selectedCampaigns" ng-options="campaign as campaign.name for campaign in ctrl.campaigns track by campaign.id"></select>
       </div>
     </div>
   </div>

   <div class="row">
     <div class="col-xs-12 col-sm-3">
       <fieldset>
         <div class="form-group m-b-0">
           <label for="creationDate">Started since:</label>
           <input id="creationDate" name="creationDate" class="form-control" ng-model="ctrl.model.creationDate" placeholder="dd-mm-yyyy"></input>
         </div>
       </fieldset>
     </div>
     <div class="col-xs-12">
       <span id="helpBlock2" class="help-block">Assignments that were <b>started</b> after this date.</span>
     </div>
   </div>

   <div class="row">
     <div class="col-xs-12 col-sm-3">
       <fieldset>
         <div class="form-group m-b-0">
           <label for="creationCloseDate">Started since or active during:</label>
           <input id="creationCloseDate" name="creationCloseDate" class="form-control" ng-model="ctrl.model.creationCloseDate" placeholder="dd-mm-yyyy"></input>
         </div>
       </fieldset>
     </div>
     <div class="col-xs-12">
       <span id="helpBlock" class="help-block">Assignments that were <b>started</b> after this date or <b>closed</b> after this date</span>
     </div>
   </div>

   <div class="form-group m-t-10">
     <button type="submit" class="btn btn-primary m-r-5" ng-click="ctrl.getAreas();">Search</button>
     <a class="btn btn-default btn-primary pull-right" href="#/admin/areas/create" role="button">Create Area</a>
   </div>
 </form>

 <br/>

 <div map id="Overview" mode="view" shapes="ctrl.shapes" style="width:100%; height:800px;" ng-if="ctrl.shapes.length > 0"></div>

  <table class="table" ng-if="ctrl.areas.length > 0">
    <caption>List of Areas</caption>
    <thead>
    <tr>
      <th></th>
      <th>City</th>
      <th>Nr</th>
      <th>Type</th>
      <th>Status</th>
      <th>Campaign</th>
      <th>Administrator</th>
      <th>Started</th>
      <th>Closed</th>
    </tr>
    </thead>
    <tbody>
    <tr ng-repeat="area in ctrl.areas">
      <td scope="row"><a ng-href="#/admin/areas/{{area.id}}"><span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a></td>
      <td><span class="text-nowrap">{{area.city.name}}</span></td>
      <td>{{area.number}}</td>
      <td>{{area.type | displayAreaType}}</td>
      <td>
        <a ng-href="#/admin/assignments/{{area.lastAssignment.id}}" ng-if="area.lastAssignment.active === true" class="btn btn-xs btn-warning">active <span class="badge" ng-bind="area.assignmentNumber"></span></a>
        <a ng-href="#/admin/assignments/{{area.lastAssignment.id}}" ng-if="area.lastAssignment.active === false" class="btn btn-xs btn-info">closed <span class="badge" ng-bind="area.assignmentNumber"></span></a>
      </td>
      <td><span class="text-nowrap" ng-bind="area.lastAssignment.campaign.name"></span></td>
      <td><span ng-bind="area.lastAssignment.account.firstName"></span> <span ng-bind="area.lastAssignment.account.infix"></span> <span ng-bind="area.lastAssignment.account.lastName"></span></td>
      <td><span class="text-nowrap" ng-bind="area.lastAssignment.creationDate | daysFromNow" title="{{area.lastAssignment.creationDate | formatShortDate}}"></span></td>
      <td><span class="text-nowrap" ng-bind="area.lastAssignment.closeDate | daysFromNow" title="{{area.lastAssignment.closeDate | formatShortDate}}"></span></td>
    </tr>
    </tbody>
  </table>




